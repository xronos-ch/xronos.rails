<% content_for :title, "Curate taxons" %>
<% content_for :meta_description, "List of biological taxa in XRONOS that are not currently matched to the GBIF Backbone Taxonomy." %>

<div class="container my-5">

  <h1>Taxons</h1>

  <ul class="nav nav-pills">
    <li class="nav-item">
      <a href="<%= curate_taxons_path %>" 
         class="nav-link <%= active_class(curate_taxons_path) %>"
         <%= active_aria(curate_taxons_path) %>>
        All
        <span class="badge text-bg-info"><%= Taxon.count %></span>
      </a>
    </li>
    <li class="nav-item">
      <% curate_uncontrolled_taxons_path = curate_taxons_path + "/uncontrolled" %>
      <a href="<%= curate_uncontrolled_taxons_path %>" 
         class="nav-link <%= active_class(curate_uncontrolled_taxons_path) %>"
         <%= active_aria(curate_uncontrolled_taxons_path) %>>
        Uncontrolled
        <span class="badge text-bg-info"><%= Taxon.uncontrolled.count %></span>
      </a>
    </li>
  </ul>

  <p>This page lists biological taxa in XRONOS that are not currently matched to the <a href="https://www.gbif.org/dataset/d7dddbf4-2cf0-4f39-9b2a-bb099caae36c">GBIF Backbone Taxonomy</a>. Matching scientific names are suggested using the <a href="https://www.gbif.org/developer/species">GBIF Species API</a>.</p>

  <turbo-frame id="curate-taxons-table">
    <%=
        case params[:issue]
        when "uncontrolled"
          render "table_uncontrolled", taxons: @taxons 
        else
          render "table", taxons: @taxons
        end
      %>
    <%== pagy_bootstrap_nav(@pagy) %>
  </turbo-frame>

</div>
