<% disabled ||= false  
#We do this so if disabled is not passed to the partial it doesn't crash. 
# We default it to false 
%>

<div class="row g-3">
  <div class="col-md-6">
    <%= f.label :labnr, "Lab-Nr.", class: "form-label" %>
    <%= f.text_field :labnr, class: "form-control", disabled: disabled %>

    <%= f.label :measurement_state, class: "form-label" %>
    <div>
      <%= f.collection_select :measurement_state_id, MeasurementState.all, :id, :name, { include_blank: 'Create new' }, {:class => "observed_select form-select", disabled: disabled}  %>
    </div>
      <%= f.fields_for :measurement_state, :include_id => false do |lab| %>
        <%= render 'measurement_states/measurement_state_fields', :f => lab %>
      <% end %>
    </div>
  <div class="col-md-6">
      <%= f.fields_for :lab, :include_id => false do |lab| %>
        <%= render 'labs/lab_fields', :f => lab, disabled: disabled %>
      <% end %>
    </div>
  </div>

  <% if f.object.type == "<sup>14</sup>C Measurement"%>
    <div class="col-md-12 mt-3">
      <b><%= f.label :c14_measurement %></b>
    </div>

      <%= f.fields_for :c14_measurement, f.object.c14_measurement || C14Measurement.new do |c14_measurement| %>
        <%= render 'c14_measurements/c14_measurement_fields', :f => c14_measurement, disabled: disabled %>
      <% end %>

  <%end%>

    <div class="col-md-12 mt-3">
    <b><%= f.label :references %></b>
  </div>
    <%= f.fields_for :references do |reference| %>
      <%= render 'references/reference_fields_ass', :f => reference, disabled: disabled %>
    <% end %>
     <% unless disabled %>
    <div class='links'>
      <%= fa_icon "plus" %> <%= link_to_add_association 'add reference', f, :references, partial: 'references/reference_fields_ass'%>
    </div>
    <% end %>

</div>





