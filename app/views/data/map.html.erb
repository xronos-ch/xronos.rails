<% content_for :head do %>
  <%= javascript_pack_tag 'map' %>
<% end %>

<!-- #### Background map #### -->
<div id="background_map" style="height:80vH; position: relative;outline: none;" class="container-fluid"></div>
<div id="filter-info">
  <table id="selected_measurements-datatable" class="table table-striped table-sm" data-source="<%= table_path(format: :json) %>" style="width: 100%" data-manual-filter="<%= session.keys.any? { |key| key.to_s == "manual_table_selection"}%>" data-other-filter="<%=session.keys.any? { |key| key.to_s.match(/^query_.+/) || key.to_s.match(/^spatial_lasso_.+/)} %>">
    <thead>
      <tr>
        <th class="select-checkbox"><input id="selectAll" type="checkbox"></th>
        <th>labnr</th>
        <th>bp</th>
        <th>std</th>
        <th>cal_bp</th>
        <th>cal_std</th>
        <th>site</th>
        <th>period</th>
        <th>material</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
</div>

<div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="filterDataOffcanvas" aria-labelledby="offcanvasScrollingLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasScrollingLabel">
      Filter Data
    </h5>
    <div class="clearfix">
      <button type="button" class="btn-close" aria-label="Close" data-bs-toggle="offcanvas" data-bs-target="#filterDataOffcanvas" aria-controls="filterDataOffcanvas" id="button_close_filter_data"></button>
    </div>
  </div>
  <!-- #### Filter #### -->
  <%= render "filter" %>
</div>

