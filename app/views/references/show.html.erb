<% content_for :title, @reference.render_citation %>

<header id="reference-header" class="bg-primary text-light">
  <div class="container my-5">
    <h1 class="display-1"><%= @reference.render_citation %></h1>
    <h2 class="display-6">Bibliographic reference</h2>
  </div>
</header>

<section id="reference-details" class="bg-body">
  <div class="container my-5">
    <%= render "bibliography", references: [@reference] %>
  </div>
</section>

<section id="reference-citations" class="bg-light">
  <div class="container my-5">
    <h2>Citing records</h2>
    <% c = @reference.citations.count %>
    <p>There <%= c > 1 ? 'are' : 'is' %> <%= c %> <%= 'record'.pluralize(c) %>
        in XRONOS that <%= c > 1 ? 'cite' : 'cites' %> this reference.</p>

    <% unless @sites.blank? %>
      <h3><%= Site.label.humanize.pluralize %> (<%= @sites.count %>)</h3>
      <ul>
      <% @sites.each do |site| %>
        <li><%= link_to site.name, site %>, <%= render "sites/country", site: site %></li>
      <% end %>
      </ul>
    <% end %>

    <% unless @c14s.blank? %>
      <h3><%= C14.label.humanize.pluralize %> (<%= @c14s.count %>)</h3>
      <%= render "c14s/table", c14s: @c14s %>
    <% end %>

    <% unless @typos.blank? %>
      <h3><%= Typo.label.humanize.pluralize %> (<%= @typos.count %>)</h3>
      <%= render "typos/table", typos: @typos %>
    <% end %>
  </div>
</section>

<section id="xronos-metadata" class="bg-body">
  <div class="container my-5">
    <div class="row">

      <div class="col">
        <h2>XRONOS metadata</h2>
        <%= render "shared/record_metadata", record: @reference, record_label: "reference" %>
      </div>

      <div class="col">
        <h2>Revision history</h2>
        <%= render "application/paper_trail/versions", item: @reference %>
      </div>
  </div>
</section>
