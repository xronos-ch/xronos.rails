<% content_for :title, "References" %>

<div class="container my-5">

  <h1>References</h1>

  <table class="responsive nowrap table table-hover align-middle">
    <thead>
      <tr>
        <th>Label</th>
        <th>Reference</th>
        <th>Citations</th>
        <% if can? :manage, Reference %><th><!--Actions--></th><% end %>
      </tr>
    </thead>

    <tbody>
      <% @references.each do |reference| %>
        <tr>
          <td><%= link_to reference.short_ref, reference %></td>
          <td><%= reference.render %></td>
          <td><%= reference.citations_count %></td>
          <% if can? :manage, Reference %><td class="text-end"><%= render 'shared/action_buttons_compact', i: reference %></td><% end %>
        </tr>
      <% end %>
    </tbody>
  </table>

  <%== pagy_bootstrap_nav(@pagy) %>

  <% if can? :create, Reference %>
    <%= link_to 'New reference', new_reference_path, class: 'btn btn-secondary',
      data: { "turbo_frame": "remote_modal" } %>
  <% end %>
</div>
